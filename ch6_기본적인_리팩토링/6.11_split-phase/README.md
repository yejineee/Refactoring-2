# 6.11 단계 쪼개기 (Split Phase)

# 배경

- 모듈 분리를 통한 테스트
    - 대상 : 서로 다른 두 대상을 한 번에 다루는 코드
    - 장점
        - 별도 모듈로 분리하면, 그 차이를 코드에서 분명하게 알 수 있음.
        - 코드 수정이 필요할 때, 하나에만 집중할 수 있음.
    - 방법 : 동작을 두 단계로 쪼갬.
    - 예 : 컴파일러
        - 텍스트를 토큰화, 토큰 파싱하여 구문 트리 생성, 구문트리 변환, object code 생성
        - 각 단계는 나머지 단계에 대해서 신경쓰지 X → 자기 자신에게만 집중

# 절차

1. 두 번째 단계에 해당하는 코드를 독립 함수로 호출
2. 테스트
3. 중간 데이터 구조를 만듦. 앞에서 추출한 함수의 인수로 추가
4. 테스트
5. 추출한 두 번째 단계 함수의 매개변수를 하나씩 검토. 첫 번째 단계에서 사용되는 것은 중간 데이터 구조로 옮김. 
    1. 각 단계마다 테스트 필요
    2. 첫 번째 단계에서 사용하나, 생성된 것이 아닌 경우 → 매개변수로 두는 것도 괜찮음.
6. 첫 번째 단계 코드를 함수로 추출하여, 중간 데이터 구조를 반환하도록 함.

# 참고
- https://www.youtube.com/watch?v=MfQLk8IL60Y&list=PLeQ0NTYUDTmMM71Jn1scbEYdLFHz5ZqFA&index=29&t=497s&ab_channel=%EB%B0%B1%EB%AA%85%EC%84%9D
- https://refactoring.com/catalog/splitPhase.html